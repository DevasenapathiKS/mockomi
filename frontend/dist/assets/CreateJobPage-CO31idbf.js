import{j as e,m as U}from"./ui-CYsdiTaZ.js";import{u as H,b as x}from"./index.esm-B2VVV5rR.js";import{b as V,u as X,d as E}from"./data-BB-WZl-K.js";import{m as Y,E as c,J as r,S as G,z as b}from"./index-CIszBDTW.js";import{j as g}from"./jobService-DK6Hph1o.js";import{D as k}from"./DashboardLayout-DyH2yYCL.js";import{f as W,e as Z}from"./vendor-08mqACR8.js";import{B as m}from"./Button-qtzxgz-Z.js";import{I as i}from"./Input-BBy5sVcg.js";import{T as ee}from"./Textarea-BjLH9yoL.js";import{C as n}from"./Card-L60jO2Bd.js";import{F as se}from"./ArrowLeftIcon-iBAG5m-G.js";import{F as h}from"./TrashIcon-DbF6K8lY.js";import{F as y}from"./PlusIcon-CNKnC3kY.js";import"./useAuth-C9mmUWWt.js";import"./XMarkIcon-B-SQiyPX.js";import"./UserIcon-ACflAg1t.js";import"./UsersIcon-hudjBy-f.js";import"./BuildingOfficeIcon-m0Wh3_We.js";const ve=()=>{var T,w;const{id:d}=W(),p=Z(),j=V(),o=!!d,{data:R,isLoading:C}=X({queryKey:["job",d],queryFn:()=>g.getJob(d),enabled:o}),{register:l,control:u,handleSubmit:S,formState:{errors:f}}=H({defaultValues:R||{title:"",description:"",location:{city:"",state:"",country:"India",isRemote:!1},employmentType:r.FULL_TIME,experienceLevel:c.MID,salary:{min:0,max:0,currency:"INR",isNegotiable:!0},skills:[""],requirements:[""],responsibilities:[""],benefits:[""],applicationDeadline:"",openings:1,status:Y.DRAFT}}),{fields:F,append:q,remove:I}=x({control:u,name:"skills"}),{fields:J,append:L,remove:D}=x({control:u,name:"requirements"}),{fields:A,append:M,remove:P}=x({control:u,name:"responsibilities"}),{fields:B,append:z,remove:O}=x({control:u,name:"benefits"}),v=E({mutationFn:s=>g.createJob(s),onSuccess:()=>{b.success("Job posted successfully!"),j.invalidateQueries({queryKey:["employer-jobs"]}),p("/dashboard/my-jobs")},onError:s=>{b.error(s.message||"Failed to create job")}}),N=E({mutationFn:s=>g.updateJob(d,s),onSuccess:()=>{b.success("Job updated successfully!"),j.invalidateQueries({queryKey:["employer-jobs"]}),j.invalidateQueries({queryKey:["job",d]}),p("/dashboard/my-jobs")},onError:s=>{b.error(s.message||"Failed to update job")}}),_=s=>{const t={...s,skills:s.skills.filter(a=>(a==null?void 0:a.value)||a),requirements:s.requirements.filter(a=>(a==null?void 0:a.value)||a),responsibilities:s.responsibilities.filter(a=>(a==null?void 0:a.value)||a),benefits:s.benefits.filter(a=>(a==null?void 0:a.value)||a),employmentType:Q(s.employmentType)};o?N.mutate(t):v.mutate(t);function Q(a){switch(a){case r.FULL_TIME:return"full_time";case r.PART_TIME:return"part_time";case r.CONTRACT:return"contract";case r.INTERNSHIP:return"internship";case r.REMOTE:return"freelance";default:return a}}},$=[{value:r.FULL_TIME,label:"Full Time"},{value:r.PART_TIME,label:"Part Time"},{value:r.CONTRACT,label:"Contract"},{value:r.INTERNSHIP,label:"Internship"},{value:r.REMOTE,label:"Remote"}],K=[{value:c.ENTRY,label:"Entry Level (0-2 years)"},{value:c.MID,label:"Mid Level (2-5 years)"},{value:c.SENIOR,label:"Senior Level (5-8 years)"},{value:c.LEAD,label:"Lead (8+ years)"},{value:c.EXECUTIVE,label:"Executive"}];return o&&C?e.jsx(k,{children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(G,{size:"lg"})})}):e.jsx(k,{children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>p("/dashboard/my-jobs"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-6",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Back to Jobs"]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:o?"Edit Job":"Post a New Job"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Fill in the details to ",o?"update your job listing":"create a new job listing"]})]}),e.jsx("form",{onSubmit:S(_),className:"space-y-6",children:e.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs(n,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{label:"Job Title",placeholder:"e.g., Senior Software Engineer",...l("title",{required:"Job title is required"}),error:(T=f.title)==null?void 0:T.message}),e.jsx(ee,{label:"Job Description",placeholder:"Describe the role, responsibilities, and what you're looking for...",rows:6,...l("description",{required:"Description is required"}),error:(w=f.description)==null?void 0:w.message}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Employment Type"}),e.jsx("select",{...l("employmentType"),className:"block w-full px-4 py-2.5 text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:$.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Experience Level"}),e.jsx("select",{...l("experienceLevel"),className:"block w-full px-4 py-2.5 text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:K.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),e.jsx(i,{label:"Number of Openings",type:"number",min:1,...l("openings",{valueAsNumber:!0})})]})]}),e.jsxs(n,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(i,{label:"City",placeholder:"e.g., Bangalore",...l("location.city")}),e.jsx(i,{label:"State",placeholder:"e.g., Karnataka",...l("location.state")}),e.jsx(i,{label:"Country",placeholder:"e.g., India",...l("location.country")}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",...l("location.isRemote"),className:"h-4 w-4 text-primary-600 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"This is a remote position"})]})]})]}),e.jsxs(n,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Salary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(i,{label:"Minimum (₹ per annum)",type:"number",placeholder:"e.g., 600000",...l("salary.min",{valueAsNumber:!0})}),e.jsx(i,{label:"Maximum (₹ per annum)",type:"number",placeholder:"e.g., 1000000",...l("salary.max",{valueAsNumber:!0})}),e.jsxs("div",{className:"flex items-center md:pt-6",children:[e.jsx("input",{type:"checkbox",...l("salary.isNegotiable"),className:"h-4 w-4 text-primary-600 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Negotiable"})]})]})]}),e.jsxs(n,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Required Skills"}),e.jsxs("div",{className:"space-y-3",children:[F.map((s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{placeholder:"e.g., React.js",...l(`skills.${t}`),className:"flex-1"}),e.jsx("button",{type:"button",onClick:()=>I(t),className:"p-2 text-red-500 hover:text-red-700",children:e.jsx(h,{className:"h-5 w-5"})})]},s.id)),e.jsxs(m,{type:"button",variant:"outline",size:"sm",onClick:()=>q(""),children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Add Skill"]})]})]}),e.jsxs(n,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Requirements"}),e.jsxs("div",{className:"space-y-3",children:[J.map((s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{placeholder:"e.g., 3+ years of experience in web development",...l(`requirements.${t}`),className:"flex-1"}),e.jsx("button",{type:"button",onClick:()=>D(t),className:"p-2 text-red-500 hover:text-red-700",children:e.jsx(h,{className:"h-5 w-5"})})]},s.id)),e.jsxs(m,{type:"button",variant:"outline",size:"sm",onClick:()=>L(""),children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Add Requirement"]})]})]}),e.jsxs(n,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Responsibilities"}),e.jsxs("div",{className:"space-y-3",children:[A.map((s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{placeholder:"e.g., Design and implement new features",...l(`responsibilities.${t}`),className:"flex-1"}),e.jsx("button",{type:"button",onClick:()=>P(t),className:"p-2 text-red-500 hover:text-red-700",children:e.jsx(h,{className:"h-5 w-5"})})]},s.id)),e.jsxs(m,{type:"button",variant:"outline",size:"sm",onClick:()=>M(""),children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Add Responsibility"]})]})]}),e.jsxs(n,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Benefits"}),e.jsxs("div",{className:"space-y-3",children:[B.map((s,t)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{placeholder:"e.g., Health insurance",...l(`benefits.${t}`),className:"flex-1"}),e.jsx("button",{type:"button",onClick:()=>O(t),className:"p-2 text-red-500 hover:text-red-700",children:e.jsx(h,{className:"h-5 w-5"})})]},s.id)),e.jsxs(m,{type:"button",variant:"outline",size:"sm",onClick:()=>z(""),children:[e.jsx(y,{className:"h-4 w-4 mr-2"}),"Add Benefit"]})]})]}),e.jsxs(n,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Deadline"}),e.jsx(i,{type:"date",label:"Application Deadline",...l("applicationDeadline"),min:new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(m,{type:"button",variant:"outline",onClick:()=>p("/dashboard/my-jobs"),children:"Cancel"}),e.jsx(m,{type:"submit",isLoading:v.isPending||N.isPending,children:o?"Update Job":"Post Job"})]})]})})]})})};export{ve as default};
