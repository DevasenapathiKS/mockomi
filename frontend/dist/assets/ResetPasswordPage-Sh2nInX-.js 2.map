{"version":3,"file":"ResetPasswordPage-Sh2nInX-.js","sources":["../../src/pages/auth/ResetPasswordPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useSearchParams, useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { LockClosedIcon, EyeIcon, EyeSlashIcon, CheckCircleIcon } from '@heroicons/react/24/outline';\nimport { authService } from '@/services/authService';\nimport Button from '@/components/ui/Button';\nimport Input from '@/components/ui/Input';\nimport { Card } from '@/components/ui/Card';\n\nconst resetPasswordSchema = z.object({\n  password: z\n    .string()\n    .min(8, 'Password must be at least 8 characters')\n    .regex(\n      /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/,\n      'Password must contain at least one uppercase letter, one lowercase letter, and one number'\n    ),\n  confirmPassword: z.string().min(1, 'Please confirm your password'),\n}).refine((data) => data.password === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: ['confirmPassword'],\n});\n\ntype ResetPasswordFormData = z.infer<typeof resetPasswordSchema>;\n\nconst ResetPasswordPage: React.FC = () => {\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const token = searchParams.get('token');\n  \n  const [showPassword, setShowPassword] = useState(false);\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isSuccess, setIsSuccess] = useState(false);\n  const [error, setError] = useState<string>('');\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<ResetPasswordFormData>({\n    resolver: zodResolver(resetPasswordSchema),\n  });\n\n  if (!token) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"w-full max-w-md space-y-8\">\n          <div className=\"text-center\">\n            <Link to=\"/\" className=\"inline-block\">\n              <span className=\"text-3xl font-bold gradient-text\">Mockomi</span>\n            </Link>\n          </div>\n\n          <Card className=\"mt-8\">\n            <div className=\"text-center\">\n              <h2 className=\"text-2xl font-bold text-gray-900\">Invalid Reset Link</h2>\n              <p className=\"mt-2 text-sm text-gray-600\">\n                This password reset link is invalid or has expired.\n              </p>\n              <div className=\"mt-6\">\n                <Link to=\"/forgot-password\">\n                  <Button fullWidth>Request a new link</Button>\n                </Link>\n              </div>\n            </div>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  const onSubmit = async (data: ResetPasswordFormData) => {\n    try {\n      setIsSubmitting(true);\n      setError('');\n      await authService.resetPassword(token, data.password);\n      setIsSuccess(true);\n      setTimeout(() => {\n        navigate('/login');\n      }, 3000);\n    } catch (err) {\n      setError(err instanceof Error ? err.message : 'Failed to reset password');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (isSuccess) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"w-full max-w-md space-y-8\">\n          <div className=\"text-center\">\n            <Link to=\"/\" className=\"inline-block\">\n              <span className=\"text-3xl font-bold gradient-text\">Mockomi</span>\n            </Link>\n          </div>\n\n          <Card className=\"mt-8\">\n            <div className=\"text-center\">\n              <CheckCircleIcon className=\"mx-auto h-12 w-12 text-green-500\" />\n              <h2 className=\"mt-4 text-2xl font-bold text-gray-900\">Password Reset Successful</h2>\n              <p className=\"mt-2 text-sm text-gray-600\">\n                Your password has been successfully reset. You will be redirected to the login page shortly.\n              </p>\n              <div className=\"mt-6\">\n                <Link to=\"/login\">\n                  <Button fullWidth>Go to login</Button>\n                </Link>\n              </div>\n            </div>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"w-full max-w-md space-y-8\">\n        <div className=\"text-center\">\n          <Link to=\"/\" className=\"inline-block\">\n            <span className=\"text-3xl font-bold gradient-text\">Mockomi</span>\n          </Link>\n          <h2 className=\"mt-6 text-3xl font-bold tracking-tight text-gray-900\">\n            Reset your password\n          </h2>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            Enter your new password below.\n          </p>\n        </div>\n\n        <Card className=\"mt-8\">\n          <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n            {error && (\n              <div className=\"rounded-md bg-red-50 p-4\">\n                <p className=\"text-sm text-red-800\">{error}</p>\n              </div>\n            )}\n\n            <Input\n              label=\"New Password\"\n              type={showPassword ? 'text' : 'password'}\n              autoComplete=\"new-password\"\n              placeholder=\"••••••••\"\n              leftIcon={<LockClosedIcon className=\"h-5 w-5\" />}\n              rightIcon={\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"focus:outline-none\"\n                >\n                  {showPassword ? (\n                    <EyeSlashIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <EyeIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              }\n              error={errors.password?.message}\n              {...register('password')}\n            />\n\n            <Input\n              label=\"Confirm New Password\"\n              type={showConfirmPassword ? 'text' : 'password'}\n              autoComplete=\"new-password\"\n              placeholder=\"••••••••\"\n              leftIcon={<LockClosedIcon className=\"h-5 w-5\" />}\n              rightIcon={\n                <button\n                  type=\"button\"\n                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}\n                  className=\"focus:outline-none\"\n                >\n                  {showConfirmPassword ? (\n                    <EyeSlashIcon className=\"h-5 w-5\" />\n                  ) : (\n                    <EyeIcon className=\"h-5 w-5\" />\n                  )}\n                </button>\n              }\n              error={errors.confirmPassword?.message}\n              {...register('confirmPassword')}\n            />\n\n            <div className=\"text-xs text-gray-500\">\n              <p>Password must:</p>\n              <ul className=\"list-disc list-inside mt-1\">\n                <li>Be at least 8 characters long</li>\n                <li>Contain at least one uppercase letter</li>\n                <li>Contain at least one lowercase letter</li>\n                <li>Contain at least one number</li>\n              </ul>\n            </div>\n\n            <Button type=\"submit\" fullWidth isLoading={isSubmitting} size=\"lg\">\n              Reset password\n            </Button>\n\n            <div className=\"text-center\">\n              <Link\n                to=\"/login\"\n                className=\"text-sm font-medium text-primary-600 hover:text-primary-500\"\n              >\n                Back to login\n              </Link>\n            </div>\n          </form>\n        </Card>\n      </div>\n    </div>\n  );\n};\n\nexport default ResetPasswordPage;\n"],"names":["resetPasswordSchema","z.object","z.string","data","ResetPasswordPage","searchParams","useSearchParams","navigate","useNavigate","token","showPassword","setShowPassword","useState","showConfirmPassword","setShowConfirmPassword","isSubmitting","setIsSubmitting","isSuccess","setIsSuccess","error","setError","register","handleSubmit","errors","useForm","zodResolver","jsxs","jsx","Link","Card","Button","onSubmit","authService","err","CheckCircleIcon","Input","LockClosedIcon","EyeSlashIcon","EyeIcon","_a","_b"],"mappings":"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"}