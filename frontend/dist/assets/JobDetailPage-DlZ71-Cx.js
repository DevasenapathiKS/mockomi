import{j as e,m as c}from"./ui-E8jIx32d.js";import{r as l,f as P,e as O,L as C}from"./vendor-08mqACR8.js";import{u as D,d as _}from"./data-CNpY1-rC.js";import{u as V,S as W,z as $}from"./index-Csr_6NQa.js";import{j as S}from"./jobService-CZ1Jgm8v.js";import{P as p}from"./PublicLayout-IR7QtVAM.js";import{B as m}from"./Button-DkVvCag_.js";import"./Input-Bbjou70d.js";import{T as Z}from"./Textarea-Da6oJh8a.js";import{C as o}from"./Card-Kk9NAdVM.js";import{B as h}from"./Badge-BMjbNvha.js";import{M as K}from"./Modal-DPRplyTw.js";import{E as Q}from"./EmptyState-DFqz2BFE.js";import{F as U}from"./ArrowLeftIcon-iBAG5m-G.js";import{F as E}from"./BuildingOfficeIcon-m0Wh3_We.js";import{F as G}from"./MapPinIcon-CHXOjtSM.js";import{F as A}from"./XMarkIcon-B-SQiyPX.js";import{F as B}from"./ClockIcon-sUFCzahK.js";import{F as y}from"./CheckCircleIcon-BIxcTuyz.js";import{F as H}from"./CurrencyRupeeIcon-qiBkUxPz.js";import{F as I,a as X}from"./UsersIcon-hudjBy-f.js";function Y({title:i,titleId:n,...d},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},d),i?l.createElement("title",{id:n},i):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"}))}const ee=l.forwardRef(Y);function se({title:i,titleId:n,...d},r){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":n},d),i?l.createElement("title",{id:n},i):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"}))}const ae=l.forwardRef(se),Fe=()=>{var N,u,v,b,w,F,k,L,R;const{id:i}=P(),n=O(),{isAuthenticated:d,user:r}=V(),[z,x]=l.useState(!1),[j,f]=l.useState(""),{data:s,isLoading:J,error:T}=D({queryKey:["job",i],queryFn:()=>S.getJob(i),enabled:!!i}),g=_({mutationFn:()=>S.applyToJob(i,{coverLetter:j}),onSuccess:()=>{$.success("Application submitted successfully!"),x(!1),f("")},onError:a=>{$.error(a.message||"Failed to submit application")}}),M=()=>{if(!d){n("/login",{state:{from:`/jobs/${i}`}});return}x(!0)},q=(a,t)=>!a&&!t?"Not disclosed":a&&t?`₹${(a/1e5).toFixed(1)}L - ₹${(t/1e5).toFixed(1)}L per year`:a?`₹${(a/1e5).toFixed(1)}L+ per year`:`Up to ₹${(t/1e5).toFixed(1)}L per year`;return J?e.jsx(p,{children:e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx(W,{size:"lg"})})}):T||!s?e.jsx(p,{children:e.jsx("div",{className:"max-w-4xl mx-auto py-12 px-4",children:e.jsx(Q,{title:"Job not found",description:"The job you're looking for doesn't exist or has been removed.",action:e.jsx(C,{to:"/jobs",children:e.jsx(m,{children:"Browse Jobs"})})})})}):e.jsx(p,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs(C,{to:"/jobs",className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Back to Jobs"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:(N=s.company)!=null&&N.logo?e.jsx("img",{src:s.company.logo,alt:s.company.companyName,className:"w-20 h-20 rounded-xl object-cover"}):e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center",children:e.jsx(E,{className:"h-10 w-10 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.title}),e.jsx("p",{className:"text-lg text-gray-600 mt-1",children:((u=s.company)==null?void 0:u.companyName)||"Company"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",children:e.jsx(ee,{className:"h-4 w-4"})}),e.jsx(m,{variant:"outline",size:"sm",children:e.jsx(ae,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),((v=s.location)==null?void 0:v.city)||((b=s.location)==null?void 0:b.country)||"Location not specified",((w=s.location)==null?void 0:w.remote)&&" (Remote)"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),s.experienceLevel]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"h-4 w-4 mr-1"}),s.employmentType.replace("_"," ")]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx(h,{variant:"primary",children:s.employmentType.replace("_"," ")}),((F=s.location)==null?void 0:F.remote)&&e.jsx(h,{variant:"success",children:"Remote"})]}),e.jsx("div",{className:"mt-6",children:e.jsx(m,{size:"lg",onClick:M,disabled:(r==null?void 0:r.role)==="employer",children:(r==null?void 0:r.role)==="employer"?"Cannot apply as employer":e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"h-5 w-5 mr-2"}),"Apply Now"]})})})]})]})]})}),e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(o,{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Job Description"}),e.jsx("div",{className:"prose prose-sm max-w-none text-gray-600",children:s.description.split(`
`).map((a,t)=>e.jsx("p",{children:a},t))})]})}),s.requirements&&s.requirements.length>0&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(o,{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Requirements"}),e.jsx("ul",{className:"space-y-2",children:s.requirements.map((a,t)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(y,{className:"h-5 w-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-600",children:a})]},t))})]})}),s.responsibilities&&s.responsibilities.length>0&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(o,{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Responsibilities"}),e.jsx("ul",{className:"space-y-2",children:s.responsibilities.map((a,t)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(y,{className:"h-5 w-5 text-blue-500 mr-2 flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-gray-600",children:a})]},t))})]})}),s.benefits&&s.benefits.length>0&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsxs(o,{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Benefits"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.benefits.map((a,t)=>e.jsx(h,{variant:"info",children:a},t))})]})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(o,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Job Overview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Salary"}),e.jsx("p",{className:"font-medium",children:q((k=s.salary)==null?void 0:k.min,(L=s.salary)==null?void 0:L.max)})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Experience"}),e.jsx("p",{className:"font-medium capitalize",children:s.experienceLevel})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Job Type"}),e.jsx("p",{className:"font-medium capitalize",children:s.employmentType.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(I,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Posted"}),e.jsx("p",{className:"font-medium",children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{className:"h-5 w-5 text-gray-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Applications"}),e.jsx("p",{className:"font-medium",children:s.applicationsCount||0})]})]})]})]})}),s.skills&&s.skills.length>0&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(o,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Required Skills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.skills.map((a,t)=>e.jsx("span",{className:"px-3 py-1 bg-primary-50 text-primary-700 text-sm rounded-full",children:a},t))})]})}),s.company&&e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(o,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"About the Company"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.company.logo?e.jsx("img",{src:s.company.logo,alt:s.company.companyName,className:"w-12 h-12 rounded-lg object-cover"}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(E,{className:"h-6 w-6 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:s.company.companyName}),s.company.industry&&e.jsx("p",{className:"text-sm text-gray-500",children:s.company.industry})]})]}),s.company.description&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-4",children:s.company.description}),s.company.website&&e.jsx("a",{href:s.company.website,target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-4 text-sm text-primary-600 hover:text-primary-700",children:"Visit Website →"})]})})]})]})}),e.jsx(K,{isOpen:z,onClose:()=>x(!1),title:"Apply for this position",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.title}),e.jsx("p",{className:"text-gray-600",children:(R=s.company)==null?void 0:R.companyName})]}),e.jsx(Z,{label:"Cover Letter (Optional)",placeholder:"Tell the employer why you're a great fit for this role...",value:j,onChange:a=>f(a.target.value),rows:6}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(m,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(m,{onClick:()=>g.mutate(),isLoading:g.isPending,children:"Submit Application"})]})]})})]})})};export{Fe as default};
