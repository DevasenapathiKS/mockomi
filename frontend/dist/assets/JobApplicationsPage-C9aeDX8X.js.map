{"version":3,"file":"JobApplicationsPage-C9aeDX8X.js","sources":["../../src/pages/dashboard/JobApplicationsPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useParams, Link } from 'react-router-dom';\nimport { motion } from 'framer-motion';\nimport toast from 'react-hot-toast';\nimport {\n  BriefcaseIcon,\n  DocumentTextIcon,\n  CalendarIcon,\n  ArrowLeftIcon,\n  CheckCircleIcon,\n  XCircleIcon,\n} from '@heroicons/react/24/outline';\nimport { jobService } from '@/services/jobService';\nimport { ApplicationStatus } from '@/types';\nimport { DashboardLayout } from '@/components/layout';\nimport { Card, Button, Spinner, EmptyState, Badge, Modal, Textarea, Avatar } from '@/components/ui';\n\nconst JobApplicationsPage: React.FC = () => {\n  const { jobId } = useParams<{ jobId: string }>();\n  const queryClient = useQueryClient();\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n  const [selectedApplication, setSelectedApplication] = useState<any>(null);\n  const [rejectModal, setRejectModal] = useState(false);\n  const [rejectionReason, setRejectionReason] = useState('');\n\n  const { data: job } = useQuery({\n    queryKey: ['job', jobId],\n    queryFn: () => jobService.getJob(jobId!),\n    enabled: !!jobId,\n  });\n\n  const { data, isLoading } = useQuery({\n    queryKey: ['job-applications', jobId],\n    queryFn: () => jobService.getJobApplications(jobId!),\n    enabled: !!jobId,\n  });\n\n  const updateStatusMutation = useMutation({\n    mutationFn: ({ applicationId, status, reason }: { applicationId: string; status: ApplicationStatus; reason?: string }) =>\n      jobService.updateApplicationStatus(applicationId, status, reason),\n    onSuccess: () => {\n      toast.success('Application status updated');\n      queryClient.invalidateQueries({ queryKey: ['job-applications', jobId] });\n      setRejectModal(false);\n      setRejectionReason('');\n      setSelectedApplication(null);\n    },\n    onError: (error: Error) => {\n      toast.error(error.message || 'Failed to update status');\n    },\n  });\n\n  const handleReject = () => {\n    if (!selectedApplication) return;\n    updateStatusMutation.mutate({\n      applicationId: selectedApplication._id,\n      status: ApplicationStatus.REJECTED,\n      reason: rejectionReason,\n    });\n  };\n\n  const openRejectModal = (applicationId: string) => {\n    const app = applications.find((a: any) => a._id === applicationId);\n    setSelectedApplication(app);\n    setRejectModal(true);\n  };\n\n  const applications = data?.data || [];\n  const filteredApplications = statusFilter === 'all' \n    ? applications \n    : applications.filter((app: any) => app.status === statusFilter);\n\n  const getStatusBadge = (status: ApplicationStatus) => {\n    switch (status) {\n      case ApplicationStatus.PENDING:\n        return <Badge variant=\"warning\">Pending</Badge>;\n      case ApplicationStatus.REVIEWED:\n        return <Badge variant=\"info\">Reviewed</Badge>;\n      case ApplicationStatus.SHORTLISTED:\n        return <Badge variant=\"success\">Shortlisted</Badge>;\n      case ApplicationStatus.INTERVIEW:\n        return <Badge variant=\"primary\">Interview</Badge>;\n      case ApplicationStatus.OFFERED:\n        return <Badge variant=\"success\">Offered</Badge>;\n      case ApplicationStatus.REJECTED:\n        return <Badge variant=\"danger\">Rejected</Badge>;\n      case ApplicationStatus.WITHDRAWN:\n        return <Badge variant=\"gray\">Withdrawn</Badge>;\n      default:\n        return <Badge variant=\"gray\">{status}</Badge>;\n    }\n  };\n\n  const applicationCounts = {\n    all: applications.length,\n    pending: applications.filter((a: any) => a.status === ApplicationStatus.PENDING).length,\n    shortlisted: applications.filter((a: any) => a.status === ApplicationStatus.SHORTLISTED).length,\n  };\n\n  if (isLoading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex justify-center items-center h-64\">\n          <Spinner size=\"lg\" />\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  console.log('applications', applications);\n\n  return (\n    <DashboardLayout>\n      <div className=\"max-w-5xl mx-auto\">\n        <div className=\"mb-6\">\n          <Link\n            to=\"/dashboard/my-jobs\"\n            className=\"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4\"\n          >\n            <ArrowLeftIcon className=\"h-4 w-4 mr-2\" />\n            Back to My Jobs\n          </Link>\n          <h1 className=\"text-2xl font-bold text-gray-900\">\n            Applications for {job?.title}\n          </h1>\n          <p className=\"text-gray-600 mt-1\">\n            {applicationCounts.all} total applications\n          </p>\n        </div>\n\n        {/* Filter Tabs */}\n        <div className=\"flex gap-2 mb-6\">\n          {[\n            { key: 'all', label: 'All', count: applicationCounts.all },\n            { key: 'pending', label: 'Pending', count: applicationCounts.pending },\n            { key: 'shortlisted', label: 'Shortlisted', count: applicationCounts.shortlisted },\n          ].map((tab) => (\n            <button\n              key={tab.key}\n              onClick={() => setStatusFilter(tab.key)}\n              className={`px-4 py-2 rounded-lg font-medium transition-colors ${\n                statusFilter === tab.key\n                  ? 'bg-primary-100 text-primary-700'\n                  : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n              }`}\n            >\n              {tab.label} ({tab.count})\n            </button>\n          ))}\n        </div>\n\n        {/* Applications List */}\n        {filteredApplications.length > 0 ? (\n          <div className=\"space-y-4\">\n            {filteredApplications.map((application: any, index: number) => (\n              <motion.div\n                key={application._id}\n                initial={{ opacity: 0, y: 20 }}\n                animate={{ opacity: 1, y: 0 }}\n                transition={{ delay: index * 0.05 }}\n              >\n                <Card>\n                  <div className=\"flex flex-col md:flex-row md:items-center gap-4\">\n                    <Avatar\n                      src={application.applicant?.avatar}\n                      name={`${application.applicant?.firstName} ${application.applicant?.lastName}`}\n                      size=\"lg\"\n                    />\n\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2\">\n                        <h3 className=\"font-semibold text-gray-900\">\n                          {application.jobSeekerId?.firstName} {application.jobSeekerId?.lastName}\n                        </h3>\n                        {getStatusBadge(application.status)}\n                      </div>\n                      <p className=\"text-sm text-gray-600\">\n                        {application.applicant?.email}\n                      </p>\n                      <p className=\"text-sm text-gray-500 mt-1\">\n                        <CalendarIcon className=\"h-4 w-4 inline mr-1\" />\n                        Applied {new Date(application.appliedAt).toLocaleDateString()}\n                      </p>\n                    </div>\n\n                    <div className=\"flex items-center gap-2\">\n                      {application.resume && (\n                        <a\n                          href={application.resume}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                        >\n                          <Button variant=\"outline\" size=\"sm\">\n                            <DocumentTextIcon className=\"h-4 w-4 mr-1\" />\n                            Resume\n                          </Button>\n                        </a>\n                      )}\n\n                      {application.status === ApplicationStatus.PENDING && (\n                        <>\n                          <Button\n                            size=\"sm\"\n                            onClick={() =>\n                              updateStatusMutation.mutate({\n                                applicationId: application._id,\n                                status: ApplicationStatus.SHORTLISTED,\n                              })\n                            }\n                          >\n                            <CheckCircleIcon className=\"h-4 w-4 mr-1\" />\n                            Shortlist\n                          </Button>\n                          <Button\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => openRejectModal(application._id)}\n                          >\n                            <XCircleIcon className=\"h-4 w-4 mr-1\" />\n                            Reject\n                          </Button>\n                        </>\n                      )}\n\n                      {application.status === ApplicationStatus.SHORTLISTED && (\n                        <Button\n                          size=\"sm\"\n                          onClick={() =>\n                            updateStatusMutation.mutate({\n                              applicationId: application._id,\n                              status: ApplicationStatus.INTERVIEW,\n                            })\n                          }\n                        >\n                          Schedule Interview\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n\n                  {application.coverLetter && (\n                    <div className=\"mt-4 pt-4 border-t\">\n                      <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Cover Letter</h4>\n                      <p className=\"text-sm text-gray-600 whitespace-pre-line\">\n                        {application.coverLetter}\n                      </p>\n                    </div>\n                  )}\n                </Card>\n              </motion.div>\n            ))}\n          </div>\n        ) : (\n          <EmptyState\n            icon={<BriefcaseIcon className=\"h-12 w-12\" />}\n            title=\"No applications yet\"\n            description=\"Applications will appear here once candidates apply to this job.\"\n          />\n        )}\n\n        {/* Reject Modal */}\n        <Modal\n          isOpen={rejectModal}\n          onClose={() => setRejectModal(false)}\n          title=\"Reject Application\"\n          size=\"md\"\n        >\n          <div className=\"space-y-4\">\n            <p className=\"text-gray-600\">\n              Are you sure you want to reject this application? You can optionally provide a reason.\n            </p>\n            <Textarea\n              label=\"Rejection Reason (optional)\"\n              placeholder=\"Provide feedback for the candidate...\"\n              value={rejectionReason}\n              onChange={(e) => setRejectionReason(e.target.value)}\n              rows={4}\n            />\n            <div className=\"flex justify-end gap-3\">\n              <Button variant=\"outline\" onClick={() => setRejectModal(false)}>\n                Cancel\n              </Button>\n              <Button\n                variant=\"danger\"\n                onClick={handleReject}\n                isLoading={updateStatusMutation.isPending}\n              >\n                Reject Application\n              </Button>\n            </div>\n          </div>\n        </Modal>\n      </div>\n    </DashboardLayout>\n  );\n};\n\nexport default JobApplicationsPage;\n"],"names":["JobApplicationsPage","jobId","useParams","queryClient","useQueryClient","statusFilter","setStatusFilter","useState","selectedApplication","setSelectedApplication","rejectModal","setRejectModal","rejectionReason","setRejectionReason","job","useQuery","jobService","data","isLoading","updateStatusMutation","useMutation","applicationId","status","reason","toast","error","handleReject","ApplicationStatus","openRejectModal","app","applications","a","filteredApplications","getStatusBadge","jsx","Badge","applicationCounts","DashboardLayout","Spinner","jsxs","Link","ArrowLeftIcon","tab","application","index","motion","Card","Avatar","_a","_b","_c","_d","_e","_f","CalendarIcon","Button","DocumentTextIcon","Fragment","CheckCircleIcon","XCircleIcon","EmptyState","BriefcaseIcon","Modal","Textarea","e"],"mappings":"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"}