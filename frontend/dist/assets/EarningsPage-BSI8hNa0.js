import{j as e,m as N}from"./ui-E8jIx32d.js";import{r}from"./vendor-08mqACR8.js";import{b as pe,u as S,d as X}from"./data-CNpY1-rC.js";import{h as I,i as A,W as l,S as ge,o as D,p as ee,z as R}from"./index-DNJaUTwh.js";import{D as ae}from"./DashboardLayout-DO_CSxSv.js";import{B as p}from"./Button-DkVvCag_.js";import{I as y}from"./Input-Bbjou70d.js";import"./Textarea-Da6oJh8a.js";import{C as g}from"./Card-Kk9NAdVM.js";import{B as o}from"./Badge-BMjbNvha.js";import{M as te}from"./Modal-DPRplyTw.js";import{i as je}from"./interviewService-BWDPEkng.js";import{F as se}from"./CurrencyRupeeIcon-qiBkUxPz.js";import{F as re}from"./ClockIcon-sUFCzahK.js";import{F as ye}from"./CheckCircleIcon-BIxcTuyz.js";import{F as ne}from"./UsersIcon-hudjBy-f.js";import"./useAuth-CcWWJJRD.js";import"./XMarkIcon-B-SQiyPX.js";import"./UserIcon-ACflAg1t.js";import"./BuildingOfficeIcon-m0Wh3_We.js";function be({title:s,titleId:n,...c},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":n},c),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const Ne=r.forwardRef(be);function we({title:s,titleId:n,...c},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":n},c),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const fe=r.forwardRef(we);function ve({title:s,titleId:n,...c},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":n},c),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 19.5 15-15m0 0H8.25m11.25 0v11.25"}))}const ie=r.forwardRef(ve);function ke({title:s,titleId:n,...c},d){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:d,"aria-labelledby":n},c),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const P=r.forwardRef(ke),B={createWithdrawal:async s=>{try{return(await I.post("/withdrawals",s)).data.data}catch(n){throw new Error(A(n))}},getMyWithdrawals:async(s=1,n=10)=>{try{const c=new URLSearchParams({page:String(s),limit:String(n)});return(await I.get(`/withdrawals?${c.toString()}`)).data}catch(c){throw new Error(A(c))}},getWithdrawalStats:async()=>{try{return(await I.get("/withdrawals/stats")).data.data}catch(s){throw new Error(A(s))}},getWithdrawalById:async s=>{try{return(await I.get(`/withdrawals/${s}`)).data.data}catch(n){throw new Error(A(n))}}},Oe=()=>{var _,$,O,z,V,Q,Z,G;const s=pe(),[n,c]=r.useState("all"),[d,le]=r.useState("all"),[E,M]=r.useState("earnings"),[ce,w]=r.useState(!1),[i,j]=r.useState({accountHolderName:"",accountNumber:"",ifscCode:"",bankName:"",branchName:"",upiId:""}),[de,f]=r.useState(!1),[C,W]=r.useState(""),[u,L]=r.useState(l.BANK_TRANSFER),{data:b,isLoading:oe}=S({queryKey:["interviewer-earnings",n],queryFn:()=>je.getInterviewerEarnings({period:n})}),{data:t}=S({queryKey:["interviewer-profile"],queryFn:()=>ee.getInterviewerProfile()}),{data:m}=S({queryKey:["withdrawal-stats"],queryFn:()=>B.getWithdrawalStats()}),{data:F}=S({queryKey:["my-withdrawals"],queryFn:()=>B.getMyWithdrawals(1,20)});r.useEffect(()=>{t!=null&&t.bankDetails&&j({accountHolderName:t.bankDetails.accountHolderName||"",accountNumber:t.bankDetails.accountNumber||"",ifscCode:t.bankDetails.ifscCode||"",bankName:t.bankDetails.bankName||"",branchName:t.bankDetails.branchName||"",upiId:t.bankDetails.upiId||""})},[t]);const T=X({mutationFn:a=>ee.updateInterviewerProfile(a),onSuccess:()=>{R.success("Bank details updated successfully!"),w(!1),s.invalidateQueries({queryKey:["interviewer-profile"]})},onError:a=>{R.error(a.message||"Failed to update bank details")}}),q=X({mutationFn:()=>{var x,v,k,Y,J;const a=Math.round(parseFloat(C)*100);return u===l.BANK_TRANSFER?B.createWithdrawal({amount:a,method:u,bankDetails:{accountHolderName:((x=t==null?void 0:t.bankDetails)==null?void 0:x.accountHolderName)||"",accountNumber:((v=t==null?void 0:t.bankDetails)==null?void 0:v.accountNumber)||"",ifscCode:((k=t==null?void 0:t.bankDetails)==null?void 0:k.ifscCode)||"",bankName:((Y=t==null?void 0:t.bankDetails)==null?void 0:Y.bankName)||""}}):B.createWithdrawal({amount:a,method:u,upiId:((J=t==null?void 0:t.bankDetails)==null?void 0:J.upiId)||""})},onSuccess:()=>{R.success("Withdrawal request submitted successfully!"),f(!1),W(""),s.invalidateQueries({queryKey:["withdrawal-stats"]}),s.invalidateQueries({queryKey:["my-withdrawals"]}),s.invalidateQueries({queryKey:["interviewer-profile"]})},onError:a=>{R.error(a.message||"Failed to create withdrawal request")}}),H=(b==null?void 0:b.earnings)||[],me=(b==null?void 0:b.stats)||{totalInterviews:0},K=(F==null?void 0:F.data)||[],h=(m==null?void 0:m.availableBalance)||0,U=d==="all"?H:H.filter(a=>a.status===d),xe=a=>{switch(a){case"paid":return e.jsx(o,{variant:"success",children:"Paid"});case"pending":return e.jsx(o,{variant:"warning",children:"Pending"});case"processing":return e.jsx(o,{variant:"info",children:"Processing"});default:return e.jsx(o,{children:a})}},ue=a=>{switch(a){case D.COMPLETED:return e.jsx(o,{variant:"success",children:"Completed"});case D.PENDING:return e.jsx(o,{variant:"warning",children:"Pending"});case D.PROCESSING:return e.jsx(o,{variant:"info",children:"Processing"});case D.FAILED:return e.jsx(o,{variant:"danger",children:"Failed"});case D.REVERSED:return e.jsx(o,{variant:"gray",children:"Reversed"});default:return e.jsx(o,{children:a})}},he=()=>{var x,v,k;const a=parseFloat(C);return isNaN(a)||a<1||a>h?!1:u===l.BANK_TRANSFER?!!((x=t==null?void 0:t.bankDetails)!=null&&x.accountNumber&&((v=t==null?void 0:t.bankDetails)!=null&&v.ifscCode)):!!((k=t==null?void 0:t.bankDetails)!=null&&k.upiId)};return oe?e.jsx(ae,{children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(ge,{size:"lg"})})}):e.jsx(ae,{children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Earnings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your interview earnings and payouts"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(p,{onClick:()=>f(!0),disabled:h<1,children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Withdraw"]}),e.jsxs(p,{variant:"outline",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Export Report"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsx(g,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Available Balance"}),e.jsxs("p",{className:"text-3xl font-bold mt-1",children:["₹",h==null?void 0:h.toLocaleString()]})]}),e.jsx(se,{className:"h-12 w-12 text-green-200"})]})})}),e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(g,{className:"bg-gradient-to-br from-yellow-500 to-yellow-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm",children:"Pending Withdrawal"}),e.jsxs("p",{className:"text-3xl font-bold mt-1",children:["₹",((_=m==null?void 0:m.pendingAmount)==null?void 0:_.toLocaleString())||0]})]}),e.jsx(re,{className:"h-12 w-12 text-yellow-200"})]})})}),e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(g,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Total Withdrawn"}),e.jsxs("p",{className:"text-3xl font-bold mt-1",children:["₹",(($=m==null?void 0:m.totalWithdrawn)==null?void 0:$.toLocaleString())||0]})]}),e.jsx(ye,{className:"h-12 w-12 text-blue-200"})]})})}),e.jsx(N.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(g,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm",children:"Total Interviews"}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:me.totalInterviews})]}),e.jsx(fe,{className:"h-12 w-12 text-purple-200"})]})})})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>M("earnings"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${E==="earnings"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Earnings History"}),e.jsx("button",{onClick:()=>M("withdrawals"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${E==="withdrawals"?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Withdrawal History"})]}),E==="earnings"&&e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Period"}),e.jsxs("select",{value:n,onChange:a=>c(a.target.value),className:"block w-full px-4 py-2.5 text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"all",children:"All Time"}),e.jsx("option",{value:"this_week",children:"This Week"}),e.jsx("option",{value:"this_month",children:"This Month"}),e.jsx("option",{value:"last_month",children:"Last Month"}),e.jsx("option",{value:"this_year",children:"This Year"})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:d,onChange:a=>le(a.target.value),className:"block w-full px-4 py-2.5 text-gray-900 bg-white border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"processing",children:"Processing"})]})]})]})}),e.jsx(g,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Interview Details"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Duration"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:U.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(P,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"No earnings found"}),e.jsx("p",{className:"text-sm",children:"Complete interviews to start earning"})]})}):U.map((a,x)=>e.jsxs(N.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:x*.05},children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.candidateName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.type," Interview"]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),new Date(a.date).toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),a.duration," mins"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["₹",a.amount.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:xe(a.status)})]},a.id))})]})})})]}),E==="withdrawals"&&e.jsx(g,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:K.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:4,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(ie,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"No withdrawals yet"}),e.jsx("p",{className:"text-sm",children:"Make your first withdrawal when you have earnings"})]})}):K.map((a,x)=>e.jsxs(N.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:x*.05},children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),new Date(a.createdAt).toLocaleDateString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"text-lg font-semibold text-green-600",children:["₹",(a.amount/100).toLocaleString()]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("span",{className:"text-gray-600",children:a.method===l.BANK_TRANSFER?"Bank Transfer":"UPI"}),a.method===l.BANK_TRANSFER&&a.bankDetails&&e.jsxs("p",{className:"text-xs text-gray-400",children:[a.bankDetails.bankName," - ",a.bankDetails.accountNumber]}),a.method===l.UPI&&a.upiId&&e.jsx("p",{className:"text-xs text-gray-400",children:a.upiId})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[ue(a.status),a.failureReason&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:a.failureReason})]})})]},a._id))})]})})}),e.jsx(g,{className:"mt-6 bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(P,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-blue-900",children:"Payout Information"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Withdraw your earnings anytime to your bank account or UPI. Minimum withdrawal amount is ₹1 (for testing)."}),(O=t==null?void 0:t.bankDetails)!=null&&O.accountNumber?e.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-2",children:"Current Bank Account"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Account Holder:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.bankDetails.accountHolderName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Account No:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:["****",t.bankDetails.accountNumber.slice(-4)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Bank:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.bankDetails.bankName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"IFSC:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.bankDetails.ifscCode})]}),t.bankDetails.upiId&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("span",{className:"text-gray-500",children:"UPI ID:"}),e.jsx("span",{className:"ml-2 font-medium text-gray-900",children:t.bankDetails.upiId})]})]})]}):e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"⚠️ No bank details added yet. Please add your bank account to receive payouts."})}),e.jsx(p,{variant:"outline",size:"sm",className:"mt-3 border-blue-300",onClick:()=>w(!0),children:(z=t==null?void 0:t.bankDetails)!=null&&z.accountNumber?"Update Bank Details":"Add Bank Details"})]})]})}),e.jsx(te,{isOpen:ce,onClose:()=>w(!1),title:"Update Bank Details",size:"lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Please provide your bank account details for receiving payouts. Ensure all information is accurate."}),e.jsx(y,{label:"Account Holder Name",placeholder:"Enter name as per bank account",value:i.accountHolderName,onChange:a=>j({...i,accountHolderName:a.target.value}),required:!0}),e.jsx(y,{label:"Account Number",placeholder:"Enter your bank account number",value:i.accountNumber,onChange:a=>j({...i,accountNumber:a.target.value}),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(y,{label:"IFSC Code",placeholder:"e.g., SBIN0001234",value:i.ifscCode,onChange:a=>j({...i,ifscCode:a.target.value.toUpperCase()}),required:!0}),e.jsx(y,{label:"Bank Name",placeholder:"Enter bank name",value:i.bankName,onChange:a=>j({...i,bankName:a.target.value}),required:!0})]}),e.jsx(y,{label:"Branch Name (Optional)",placeholder:"Enter branch name",value:i.branchName||"",onChange:a=>j({...i,branchName:a.target.value})}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Alternative Payment Method"}),e.jsx(y,{label:"UPI ID (Optional)",placeholder:"e.g., yourname@upi",value:i.upiId||"",onChange:a=>j({...i,upiId:a.target.value})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(p,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(p,{onClick:()=>T.mutate({bankDetails:i}),isLoading:T.isPending,disabled:!i.accountHolderName||!i.accountNumber||!i.ifscCode||!i.bankName,children:"Save Bank Details"})]})]})}),e.jsx(te,{isOpen:de,onClose:()=>f(!1),title:"Withdraw Earnings",size:"md",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-700",children:"Available Balance"}),e.jsxs("p",{className:"text-3xl font-bold text-green-800",children:["₹",h.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Withdrawal Amount (₹)"}),e.jsx(y,{type:"number",placeholder:"Enter amount (min ₹1)",value:C,onChange:a=>W(a.target.value),min:"1",max:h}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Minimum: ₹1 (for testing) | Maximum: ₹",h.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:`flex-1 p-4 border rounded-lg cursor-pointer transition-all ${u===l.BANK_TRANSFER?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"withdrawMethod",value:l.BANK_TRANSFER,checked:u===l.BANK_TRANSFER,onChange:()=>L(l.BANK_TRANSFER),className:"sr-only"}),e.jsxs("div",{className:"text-center",children:[e.jsx(P,{className:"h-8 w-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"font-medium",children:"Bank Transfer"}),(V=t==null?void 0:t.bankDetails)!=null&&V.accountNumber?e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["****",t.bankDetails.accountNumber.slice(-4)]}):e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Not configured"})]})]}),e.jsxs("label",{className:`flex-1 p-4 border rounded-lg cursor-pointer transition-all ${u===l.UPI?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"radio",name:"withdrawMethod",value:l.UPI,checked:u===l.UPI,onChange:()=>L(l.UPI),className:"sr-only"}),e.jsxs("div",{className:"text-center",children:[e.jsx(se,{className:"h-8 w-8 mx-auto mb-2 text-gray-600"}),e.jsx("p",{className:"font-medium",children:"UPI"}),(Q=t==null?void 0:t.bankDetails)!=null&&Q.upiId?e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.bankDetails.upiId}):e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Not configured"})]})]})]})]}),!((Z=t==null?void 0:t.bankDetails)!=null&&Z.accountNumber)&&!((G=t==null?void 0:t.bankDetails)!=null&&G.upiId)&&e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"text-sm text-yellow-800",children:"⚠️ Please add your bank details or UPI ID before making a withdrawal."}),e.jsx(p,{size:"sm",variant:"outline",className:"mt-2",onClick:()=>{f(!1),w(!0)},children:"Add Bank Details"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(p,{variant:"outline",onClick:()=>f(!1),children:"Cancel"}),e.jsxs(p,{onClick:()=>q.mutate(),isLoading:q.isPending,disabled:!he(),children:["Withdraw ₹",C||"0"]})]})]})})]})})};export{Oe as default};
