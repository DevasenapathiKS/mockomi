import{j as e,m as se}from"./ui-CYsdiTaZ.js";import{r as b}from"./vendor-08mqACR8.js";import{u as ae,b as te}from"./index.esm-B2VVV5rR.js";import{b as re,u as ie,d as le}from"./data-BB-WZl-K.js";import{S as ne,n as ce,p as z,z as K}from"./index-Ct5TYyMt.js";import{D as M}from"./DashboardLayout-DO7V7z-Z.js";import{B as n}from"./Button-qtzxgz-Z.js";import{I as l}from"./Input-BBy5sVcg.js";import{T as de}from"./Textarea-BjLH9yoL.js";import{C as t}from"./Card-L60jO2Bd.js";import{B as x}from"./Badge-BvbDkg5g.js";import{F as xe}from"./PencilIcon-DMuyJX-T.js";import{F as oe}from"./StarIcon-DH5HIwKP.js";import{F as N}from"./PlusIcon-CNKnC3kY.js";import{F as me}from"./TrashIcon-DbF6K8lY.js";import{F as ge}from"./UserIcon-ACflAg1t.js";import{F as he}from"./CheckBadgeIcon-w73AzcaW.js";import{F as ue}from"./ClockIcon-sUFCzahK.js";import{F as ye}from"./CurrencyRupeeIcon-qiBkUxPz.js";import"./useAuth-EMGqLg6O.js";import"./XMarkIcon-B-SQiyPX.js";import"./UsersIcon-hudjBy-f.js";import"./BuildingOfficeIcon-m0Wh3_We.js";const Oe=()=>{var E,A,P,R,I,L,$,q,B,U;const W=re(),[f,j]=b.useState(!1),[o,w]=b.useState(""),[m,C]=b.useState(""),{data:s,isLoading:Q}=ie({queryKey:["interviewer-profile"],queryFn:()=>z.getInterviewerProfile()}),k=le({mutationFn:a=>z.updateInterviewerProfile(a),onSuccess:()=>{K.success("Profile updated successfully!"),W.invalidateQueries({queryKey:["interviewer-profile"]}),j(!1)},onError:a=>{K.error(a.message||"Failed to update profile")}}),{register:i,control:_,handleSubmit:H,watch:p,setValue:c,formState:{errors:v}}=ae({defaultValues:{currentPosition:(s==null?void 0:s.currentPosition)||"",currentCompany:(s==null?void 0:s.currentCompany)||"",experience:(s==null?void 0:s.experience)||0,bio:(s==null?void 0:s.bio)||"",expertise:(s==null?void 0:s.expertise)||[],hourlyRate:(s==null?void 0:s.hourlyRate)||500,interviewTypes:(s==null?void 0:s.interviewTypes)||[],languages:(s==null?void 0:s.languages)||["English"],availability:(s==null?void 0:s.availability)||[],linkedinUrl:(s==null?void 0:s.linkedinUrl)||""}}),{fields:V,append:Y,remove:G}=te({control:_,name:"availability"}),g=p("expertise")||[],h=p("languages")||[],u=p("interviewTypes")||[],J=a=>{k.mutate(a)},F=()=>{o&&!g.includes(o)&&(c("expertise",[...g,o]),w(""))},X=a=>{c("expertise",g.filter(r=>r!==a))},T=()=>{m&&!h.includes(m)&&(c("languages",[...h,m]),C(""))},Z=a=>{c("languages",h.filter(r=>r!==a))},ee=a=>{u.includes(a)?c("interviewTypes",u.filter(r=>r!==a)):c("interviewTypes",[...u,a])},S=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}];return Q?e.jsx(M,{children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(ne,{size:"lg"})})}):e.jsx(M,{children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Interviewer Profile"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your interviewer profile and availability"})]}),!f&&e.jsxs(n,{onClick:()=>j(!0),children:[e.jsx(xe,{className:"h-5 w-5 mr-2"}),"Edit Profile"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs(t,{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(oe,{className:"h-6 w-6 text-yellow-400 mr-1"}),e.jsx("span",{className:"text-2xl font-bold",children:((A=(E=s==null?void 0:s.rating)==null?void 0:E.average)==null?void 0:A.toFixed(1))||"N/A"})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Rating (",((P=s==null?void 0:s.rating)==null?void 0:P.count)||0," reviews)"]})]}),e.jsxs(t,{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(s==null?void 0:s.totalInterviews)||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Interviews Completed"})]}),e.jsxs(t,{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["₹",((R=s==null?void 0:s.totalEarnings)==null?void 0:R.toLocaleString())||0]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Earnings"})]}),e.jsxs(t,{className:"text-center",children:[e.jsx(x,{variant:s!=null&&s.isApproved?"success":"warning",children:(s==null?void 0:s.approvalStatus)||"pending"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Approval Status"})]})]}),f?e.jsx("form",{onSubmit:H(J),children:e.jsxs(se.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsxs(t,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(l,{label:"Current Position",placeholder:"e.g., Senior Software Engineer",...i("currentPosition"),error:(I=v.currentPosition)==null?void 0:I.message}),e.jsx(l,{label:"Current Company",placeholder:"e.g., Google",...i("currentCompany"),error:(L=v.currentCompany)==null?void 0:L.message}),e.jsx(l,{type:"number",label:"Years of Experience",...i("experience",{valueAsNumber:!0,min:0,required:"Experience is required"}),error:($=v.experience)==null?void 0:$.message}),e.jsx(l,{type:"number",label:"Hourly Rate (₹)",...i("hourlyRate",{valueAsNumber:!0,min:100})})]}),e.jsx("div",{className:"mt-4",children:e.jsx(l,{label:"LinkedIn URL",placeholder:"https://linkedin.com/in/yourprofile",...i("linkedinUrl")})}),e.jsx("div",{className:"mt-4",children:e.jsx(de,{label:"Bio",placeholder:"Tell candidates about yourself and your interview style...",rows:4,...i("bio")})})]}),e.jsxs(t,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Areas of Expertise"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:g.map(a=>e.jsxs(x,{variant:"gray",className:"flex items-center gap-1",children:[a,e.jsx("button",{type:"button",onClick:()=>X(a),className:"ml-1 text-gray-500 hover:text-gray-700",children:"×"})]},a))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{placeholder:"Add expertise (e.g., React, System Design)",value:o,onChange:a=>w(a.target.value),onKeyPress:a=>a.key==="Enter"&&(a.preventDefault(),F())}),e.jsx(n,{type:"button",onClick:F,children:e.jsx(N,{className:"h-5 w-5"})})]})]}),e.jsxs(t,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Interview Types"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.values(ce).map(a=>e.jsx("button",{type:"button",onClick:()=>ee(a),className:`p-3 rounded-lg border-2 text-left transition-colors ${u.includes(a)?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300"}`,children:a.replace("_"," ")},a))})]}),e.jsxs(t,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Languages"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:h.map(a=>e.jsxs(x,{variant:"info",className:"flex items-center gap-1",children:[a,e.jsx("button",{type:"button",onClick:()=>Z(a),className:"ml-1 text-gray-500 hover:text-gray-700",children:"×"})]},a))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{placeholder:"Add language",value:m,onChange:a=>C(a.target.value),onKeyPress:a=>a.key==="Enter"&&(a.preventDefault(),T())}),e.jsx(n,{type:"button",onClick:T,children:e.jsx(N,{className:"h-5 w-5"})})]})]}),e.jsxs(t,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Availability"}),e.jsxs("div",{className:"space-y-3",children:[V.map((a,r)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("select",{...i(`availability.${r}.dayOfWeek`,{valueAsNumber:!0}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:S.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))}),e.jsx(l,{type:"time",...i(`availability.${r}.slots.0.startTime`)}),e.jsx("span",{children:"to"}),e.jsx(l,{type:"time",...i(`availability.${r}.slots.0.endTime`)}),e.jsx(n,{type:"button",variant:"outline",size:"sm",onClick:()=>G(r),children:e.jsx(me,{className:"h-4 w-4"})})]},a.id)),e.jsxs(n,{type:"button",variant:"outline",onClick:()=>Y({dayOfWeek:1,slots:[{startTime:"09:00",endTime:"17:00"}]}),children:[e.jsx(N,{className:"h-5 w-5 mr-2"}),"Add Availability Slot"]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(n,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(n,{type:"submit",isLoading:k.isPending,children:"Save Changes"})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(t,{children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"w-24 h-24 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(ge,{className:"h-12 w-12 text-primary-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:(s==null?void 0:s.currentPosition)||"Position not set"}),(s==null?void 0:s.isApproved)&&e.jsx(he,{className:"h-5 w-5 text-green-500"})]}),e.jsx("p",{className:"text-gray-600",children:(s==null?void 0:s.currentCompany)||"Company not set"}),e.jsxs("p",{className:"text-gray-500 mt-1",children:[(s==null?void 0:s.experience)||0," years of experience"]}),e.jsx("p",{className:"text-gray-600 mt-3",children:(s==null?void 0:s.bio)||"No bio available"}),(s==null?void 0:s.linkedinUrl)&&e.jsx("a",{href:s.linkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline mt-2 inline-block",children:"LinkedIn Profile"})]})]})}),e.jsxs(t,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Areas of Expertise"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:((q=s==null?void 0:s.expertise)==null?void 0:q.map(a=>e.jsx(x,{variant:"primary",children:a},a)))||e.jsx("p",{className:"text-gray-500",children:"No expertise added"})})]}),e.jsxs(t,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Interview Types"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:((B=s==null?void 0:s.interviewTypes)==null?void 0:B.map(a=>e.jsx(x,{variant:"info",children:a.replace("_"," ")},a)))||e.jsx("p",{className:"text-gray-500",children:"No interview types selected"})})]}),e.jsxs(t,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Languages"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:((U=s==null?void 0:s.languages)==null?void 0:U.map(a=>e.jsx(x,{variant:"gray",children:a},a)))||e.jsx("p",{className:"text-gray-500",children:"No languages added"})})]}),e.jsxs(t,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Availability"}),s!=null&&s.availability&&s.availability.length>0?e.jsx("div",{className:"space-y-2",children:s.availability.map((a,r)=>{var d,D;return e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(ue,{className:"h-4 w-4"}),e.jsx("span",{children:(d=S.find(y=>y.value===a.dayOfWeek))==null?void 0:d.label}),e.jsx("span",{children:"•"}),e.jsx("span",{children:(D=a.slots)==null?void 0:D.map((y,O)=>e.jsxs("span",{children:[y.startTime," - ",y.endTime,O<a.slots.length-1?", ":""]},O))})]},r)})}):e.jsx("p",{className:"text-gray-500",children:"No availability set"})]}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Hourly Rate"}),e.jsx("p",{className:"text-gray-600",children:"Your rate for interview sessions"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"h-6 w-6 text-gray-600"}),e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:(s==null?void 0:s.hourlyRate)||0}),e.jsx("span",{className:"text-gray-500",children:"/hour"})]})]})})]})]})})};export{Oe as default};
