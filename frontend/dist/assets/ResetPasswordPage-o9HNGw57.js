import{j as s}from"./ui-CYsdiTaZ.js";import{d as E,e as B,r as t,L as e}from"./vendor-08mqACR8.js";import{u as L}from"./index.esm-B2VVV5rR.js";import{t as T,o as M,s as f}from"./types-CnmS1EYR.js";import{a as W}from"./index-Ct5TYyMt.js";import{B as l}from"./Button-qtzxgz-Z.js";import{I as j}from"./Input-BBy5sVcg.js";import{C as n}from"./Card-L60jO2Bd.js";import{F as $}from"./CheckCircleIcon-BIxcTuyz.js";import{F as g,a as N}from"./LockClosedIcon-CYeH0qQr.js";import{F as y}from"./EyeIcon-Bn7EARGA.js";import"./data-BB-WZl-K.js";const z=M({password:f().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"Password must contain at least one uppercase letter, one lowercase letter, and one number"),confirmPassword:f().min(1,"Please confirm your password")}).refine(a=>a.password===a.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),V=()=>{var p,u;const[a]=E(),b=B(),i=a.get("token"),[r,v]=t.useState(!1),[o,P]=t.useState(!1),[S,c]=t.useState(!1),[k,C]=t.useState(!1),[m,d]=t.useState(""),{register:x,handleSubmit:R,formState:{errors:h}}=L({resolver:T(z)});if(!i)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"w-full max-w-md space-y-8",children:[s.jsx("div",{className:"text-center",children:s.jsx(e,{to:"/",className:"inline-block",children:s.jsx("span",{className:"text-3xl font-bold gradient-text",children:"Mockomi"})})}),s.jsx(n,{className:"mt-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invalid Reset Link"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"This password reset link is invalid or has expired."}),s.jsx("div",{className:"mt-6",children:s.jsx(e,{to:"/forgot-password",children:s.jsx(l,{fullWidth:!0,children:"Request a new link"})})})]})})]})});const F=async I=>{try{c(!0),d(""),await W.resetPassword(i,I.password),C(!0),setTimeout(()=>{b("/login")},3e3)}catch(w){d(w instanceof Error?w.message:"Failed to reset password")}finally{c(!1)}};return k?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"w-full max-w-md space-y-8",children:[s.jsx("div",{className:"text-center",children:s.jsx(e,{to:"/",className:"inline-block",children:s.jsx("span",{className:"text-3xl font-bold gradient-text",children:"Mockomi"})})}),s.jsx(n,{className:"mt-8",children:s.jsxs("div",{className:"text-center",children:[s.jsx($,{className:"mx-auto h-12 w-12 text-green-500"}),s.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-900",children:"Password Reset Successful"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Your password has been successfully reset. You will be redirected to the login page shortly."}),s.jsx("div",{className:"mt-6",children:s.jsx(e,{to:"/login",children:s.jsx(l,{fullWidth:!0,children:"Go to login"})})})]})})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"w-full max-w-md space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(e,{to:"/",className:"inline-block",children:s.jsx("span",{className:"text-3xl font-bold gradient-text",children:"Mockomi"})}),s.jsx("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-gray-900",children:"Reset your password"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Enter your new password below."})]}),s.jsx(n,{className:"mt-8",children:s.jsxs("form",{onSubmit:R(F),className:"space-y-6",children:[m&&s.jsx("div",{className:"rounded-md bg-red-50 p-4",children:s.jsx("p",{className:"text-sm text-red-800",children:m})}),s.jsx(j,{label:"New Password",type:r?"text":"password",autoComplete:"new-password",placeholder:"••••••••",leftIcon:s.jsx(N,{className:"h-5 w-5"}),rightIcon:s.jsx("button",{type:"button",onClick:()=>v(!r),className:"focus:outline-none",children:r?s.jsx(g,{className:"h-5 w-5"}):s.jsx(y,{className:"h-5 w-5"})}),error:(p=h.password)==null?void 0:p.message,...x("password")}),s.jsx(j,{label:"Confirm New Password",type:o?"text":"password",autoComplete:"new-password",placeholder:"••••••••",leftIcon:s.jsx(N,{className:"h-5 w-5"}),rightIcon:s.jsx("button",{type:"button",onClick:()=>P(!o),className:"focus:outline-none",children:o?s.jsx(g,{className:"h-5 w-5"}):s.jsx(y,{className:"h-5 w-5"})}),error:(u=h.confirmPassword)==null?void 0:u.message,...x("confirmPassword")}),s.jsxs("div",{className:"text-xs text-gray-500",children:[s.jsx("p",{children:"Password must:"}),s.jsxs("ul",{className:"list-disc list-inside mt-1",children:[s.jsx("li",{children:"Be at least 8 characters long"}),s.jsx("li",{children:"Contain at least one uppercase letter"}),s.jsx("li",{children:"Contain at least one lowercase letter"}),s.jsx("li",{children:"Contain at least one number"})]})]}),s.jsx(l,{type:"submit",fullWidth:!0,isLoading:S,size:"lg",children:"Reset password"}),s.jsx("div",{className:"text-center",children:s.jsx(e,{to:"/login",className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"Back to login"})})]})})]})})};export{V as default};
