import{j as e,m as l}from"./ui-CYsdiTaZ.js";import{r as m}from"./vendor-08mqACR8.js";import{u as R}from"./data-BB-WZl-K.js";import{D as u}from"./DashboardLayout-DyH2yYCL.js";import{S as C,h as I}from"./index-CIszBDTW.js";import{B as p}from"./Button-qtzxgz-Z.js";import{I as k}from"./Input-BBy5sVcg.js";import"./Textarea-BjLH9yoL.js";import{C as r}from"./Card-L60jO2Bd.js";import{B as i}from"./Badge-BvbDkg5g.js";import{F as D}from"./ArrowDownTrayIcon-j59nRfxi.js";import{F as y}from"./CheckCircleIcon-BIxcTuyz.js";import{F as f}from"./ClockIcon-sUFCzahK.js";import{F as N}from"./XCircleIcon-DXZ4M08a.js";import{F as $}from"./MagnifyingGlassIcon-DUoGsubn.js";import{F as L}from"./CurrencyRupeeIcon-qiBkUxPz.js";import{F as z}from"./UsersIcon-hudjBy-f.js";import"./useAuth-C9mmUWWt.js";import"./XMarkIcon-B-SQiyPX.js";import"./UserIcon-ACflAg1t.js";import"./BuildingOfficeIcon-m0Wh3_We.js";const se=()=>{const[n,v]=m.useState(""),[c,w]=m.useState("all"),[d,b]=m.useState("all"),[a,h]=m.useState(1),{data:s,isLoading:F}=R({queryKey:["admin-payments",{search:n,statusFilter:c,typeFilter:d,page:a}],queryFn:async()=>{const t=new URLSearchParams;return n&&t.append("search",n),c!=="all"&&t.append("status",c),d!=="all"&&t.append("type",d),t.append("page",a.toString()),t.append("limit","20"),(await I.get(`/admin/payments?${t.toString()}`)).data}}),g=(s==null?void 0:s.payments)||[],x=(s==null?void 0:s.pagination)||{total:0,pages:1},o=(s==null?void 0:s.stats)||{totalRevenue:0,completedPayments:0,pendingPayments:0,failedPayments:0},S=t=>{switch(t){case"completed":return e.jsx(i,{variant:"success",children:"Completed"});case"pending":return e.jsx(i,{variant:"warning",children:"Pending"});case"failed":return e.jsx(i,{variant:"danger",children:"Failed"});case"refunded":return e.jsx(i,{variant:"gray",children:"Refunded"});default:return e.jsx(i,{children:t})}},P=t=>{switch(t){case"completed":return e.jsx(y,{className:"h-5 w-5 text-green-500"});case"pending":return e.jsx(f,{className:"h-5 w-5 text-yellow-500"});case"failed":return e.jsx(N,{className:"h-5 w-5 text-red-500"});default:return null}};return F?e.jsx(u,{children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(C,{size:"lg"})})}):e.jsx(u,{children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payments"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[x.total," total transactions"]})]}),e.jsxs(p,{variant:"outline",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Export"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(r,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white",children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold mt-1",children:["₹",o.totalRevenue.toLocaleString()]})]})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{className:"h-8 w-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.completedPayments})]})]})})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(f,{className:"h-8 w-8 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.pendingPayments})]})]})})}),e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:e.jsx(r,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{className:"h-8 w-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Failed"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.failedPayments})]})]})})})]}),e.jsx(r,{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx($,{className:"h-5 w-5 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx(k,{placeholder:"Search by order ID or email...",value:n,onChange:t=>v(t.target.value),className:"pl-10"})]}),e.jsxs("select",{value:c,onChange:t=>w(t.target.value),className:"w-40 px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"refunded",children:"Refunded"})]}),e.jsxs("select",{value:d,onChange:t=>b(t.target.value),className:"w-40 px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"interview",children:"Interview"}),e.jsx("option",{value:"subscription",children:"Subscription"})]})]})}),e.jsxs(r,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-500",children:[e.jsx(L,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"No payments found"})]})}):g.map((t,j)=>e.jsxs(l.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:j*.03},className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("p",{className:"font-mono text-sm text-gray-900",children:t.orderId}),t.razorpayPaymentId&&e.jsx("p",{className:"font-mono text-xs text-gray-500",children:t.razorpayPaymentId})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[t.user.firstName," ",t.user.lastName]}),e.jsx("p",{className:"text-sm text-gray-500",children:t.user.email})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(i,{variant:"gray",className:"capitalize",children:t.type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:[t.currency==="INR"?"₹":"$",t.amount.toLocaleString()]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[P(t.status),S(t.status)]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),new Date(t.createdAt).toLocaleDateString()]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(t.createdAt).toLocaleTimeString()})]})]},t._id))})]})}),x.pages>1&&e.jsxs("div",{className:"flex justify-center gap-2 mt-6",children:[e.jsx(p,{variant:"outline",size:"sm",disabled:a===1,onClick:()=>h(a-1),children:"Previous"}),e.jsxs("span",{className:"flex items-center px-4 text-sm text-gray-600",children:["Page ",a," of ",x.pages]}),e.jsx(p,{variant:"outline",size:"sm",disabled:a===x.pages,onClick:()=>h(a+1),children:"Next"})]})]})]})})};export{se as default};
