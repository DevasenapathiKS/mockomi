import{b as f,d as t}from"./data-CNpY1-rC.js";import{u as k,a as r,z as o}from"./index-B8tIkyqh.js";import{e as b}from"./vendor-08mqACR8.js";const S=()=>{const s=b(),n=f(),{setAuth:i,logout:c,isAuthenticated:h,user:m}=k(),u=t({mutationFn:e=>r.register(e),onSuccess:e=>{let a={accessToken:e.accessToken,refreshToken:e.refreshToken};switch(i(e.user,a),o.success("Registration successful!"),e.user.role){case"job_seeker":s("/dashboard/profile?onboarding=1");break;case"employer":s("/dashboard/company");break;case"interviewer":s("/dashboard/interviewer-profile");break;default:s("/dashboard")}},onError:e=>{o.error(e.message||"Registration failed")}}),g=t({mutationFn:e=>r.login(e),onSuccess:e=>{console.log("Login response:",e);const a={accessToken:e.accessToken,refreshToken:e.refreshToken};switch(i(e.user,a),o.success("Welcome back!"),e.user.role){case"admin":s("/admin");break;default:s("/dashboard")}},onError:e=>{o.error(e.message||"Login failed")}}),d=t({mutationFn:()=>r.logout(),onSuccess:()=>{c(),n.clear(),o.success("Logged out successfully"),s("/")},onError:()=>{c(),n.clear(),s("/")}}),l=t({mutationFn:e=>r.changePassword(e),onSuccess:()=>{o.success("Password changed successfully")},onError:e=>{o.error(e.message||"Failed to change password")}});return{isAuthenticated:h,user:m,register:u.mutate,isRegistering:u.isPending,login:g.mutate,isLoggingIn:g.isPending,logout:d.mutate,isLoggingOut:d.isPending,changePassword:l.mutate,isChangingPassword:l.isPending}};export{S as u};
