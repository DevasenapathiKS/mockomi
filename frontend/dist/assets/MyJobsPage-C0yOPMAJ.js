import{j as e,m as L}from"./ui-E8jIx32d.js";import{r as $,L as l}from"./vendor-08mqACR8.js";import{b as S,u as E,d as u}from"./data-CNpY1-rC.js";import{S as P,m as r,z as o}from"./index-Csr_6NQa.js";import{j as c}from"./jobService-CZ1Jgm8v.js";import{D as v}from"./DashboardLayout-Crwp17Vt.js";import{B as t}from"./Button-DkVvCag_.js";import"./Input-Bbjou70d.js";import"./Textarea-Da6oJh8a.js";import{C as w}from"./Card-Kk9NAdVM.js";import{B as R}from"./Badge-BMjbNvha.js";import{M}from"./Modal-DPRplyTw.js";import{E as z}from"./EmptyState-DFqz2BFE.js";import{F,a as B}from"./TrashIcon-D7hA1fpV.js";import{F as k}from"./MapPinIcon-CHXOjtSM.js";import{F as q}from"./CurrencyRupeeIcon-qiBkUxPz.js";import{F as p}from"./UserGroupIcon-RuzObYUu.js";import{F as A}from"./EyeIcon-Bn7EARGA.js";import{F as _}from"./ClockIcon-sUFCzahK.js";import{F as T}from"./CheckCircleIcon-BIxcTuyz.js";import{F as Q}from"./XCircleIcon-DXZ4M08a.js";import{F as I}from"./PencilIcon-DMuyJX-T.js";import"./useAuth-kxZUTXHI.js";import"./XMarkIcon-B-SQiyPX.js";import"./UserIcon-ACflAg1t.js";import"./UsersIcon-hudjBy-f.js";import"./BuildingOfficeIcon-m0Wh3_We.js";const je=()=>{const d=S(),[m,n]=$.useState(null),{data:x,isLoading:C}=E({queryKey:["employer-jobs"],queryFn:()=>c.getEmployerJobs()}),h=u({mutationFn:s=>c.deleteJob(s),onSuccess:()=>{o.success("Job deleted successfully"),d.invalidateQueries({queryKey:["employer-jobs"]}),n(null)},onError:s=>{o.error(s.message||"Failed to delete job")}}),f=u({mutationFn:s=>c.publishJob(s),onSuccess:()=>{o.success("Job published successfully"),d.invalidateQueries({queryKey:["employer-jobs"]})},onError:s=>{o.error(s.message||"Failed to publish job")}}),j=u({mutationFn:s=>c.closeJob(s),onSuccess:()=>{o.success("Job closed successfully"),d.invalidateQueries({queryKey:["employer-jobs"]})},onError:s=>{o.error(s.message||"Failed to close job")}}),J=s=>({[r.DRAFT]:{variant:"gray",label:"Draft"},[r.PUBLISHED]:{variant:"success",label:"Published"},[r.CLOSED]:{variant:"danger",label:"Closed"},[r.EXPIRED]:{variant:"warning",label:"Expired"}})[s]||{variant:"gray",label:s},D=(s,a)=>!s&&!a?"Not disclosed":s&&a?`₹${(s/1e5).toFixed(1)}L - ₹${(a/1e5).toFixed(1)}L`:s?`₹${(s/1e5).toFixed(1)}L+`:`Up to ₹${(a/1e5).toFixed(1)}L`;if(C)return e.jsx(v,{children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(P,{size:"lg"})})});const i=(x==null?void 0:x.data)||[];return e.jsx(v,{children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Job Postings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your job listings and track applications"})]}),e.jsx(l,{to:"/dashboard/my-jobs/create",children:e.jsxs(t,{children:[e.jsx(F,{className:"h-5 w-5 mr-2"}),"Post New Job"]})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Jobs",count:i.length,color:"bg-blue-500"},{label:"Published",count:i.filter(s=>s.status===r.PUBLISHED).length,color:"bg-green-500"},{label:"Drafts",count:i.filter(s=>s.status===r.DRAFT).length,color:"bg-gray-500"},{label:"Total Applications",count:i.reduce((s,a)=>s+(a.applicationsCount||0),0),color:"bg-purple-500"}].map(s=>e.jsxs(w,{className:"text-center",children:[e.jsx("div",{className:`w-10 h-10 ${s.color} rounded-full flex items-center justify-center mx-auto mb-2`,children:e.jsx("span",{className:"text-white font-bold text-sm",children:s.count})}),e.jsx("p",{className:"text-sm text-gray-600",children:s.label})]},s.label))}),i.length>0?e.jsx("div",{className:"space-y-4",children:i.map((s,a)=>{var b,y,N;const g=J(s.status);return e.jsx(L.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.05},children:e.jsx(w,{children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(l,{to:`/jobs/${s._id}`,className:"text-lg font-semibold text-gray-900 hover:text-primary-600",children:s.title}),e.jsx(R,{variant:g.variant,children:g.label})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-sm text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),((b=s.location)==null?void 0:b.city)||"Location not specified"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),D((y=s.salary)==null?void 0:y.min,(N=s.salary)==null?void 0:N.max)]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(p,{className:"h-4 w-4 mr-1"}),s.applicationsCount||0," applications"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),s.views||0," views"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(_,{className:"h-4 w-4 mr-1"}),"Posted ",new Date(s.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{to:`/dashboard/my-jobs/${s._id}/applications`,children:e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx(p,{className:"h-4 w-4 mr-1"}),"Applications"]})}),s.status===r.DRAFT&&e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>f.mutate(s._id),isLoading:f.isPending,children:[e.jsx(T,{className:"h-4 w-4 mr-1"}),"Publish"]}),s.status===r.PUBLISHED&&e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>j.mutate(s._id),isLoading:j.isPending,children:[e.jsx(Q,{className:"h-4 w-4 mr-1"}),"Close"]}),e.jsx(l,{to:`/dashboard/my-jobs/${s._id}/edit`,children:e.jsx(t,{variant:"outline",size:"sm",children:e.jsx(I,{className:"h-4 w-4"})})}),e.jsx(t,{variant:"outline",size:"sm",onClick:()=>n(s._id),children:e.jsx(B,{className:"h-4 w-4 text-red-500"})})]})]})})},s._id)})}):e.jsx(z,{icon:e.jsx(p,{className:"h-12 w-12"}),title:"No job postings yet",description:"Create your first job posting to start receiving applications from qualified candidates.",action:e.jsx(l,{to:"/dashboard/my-jobs/create",children:e.jsxs(t,{children:[e.jsx(F,{className:"h-5 w-5 mr-2"}),"Post Your First Job"]})})}),e.jsx(M,{isOpen:!!m,onClose:()=>n(null),title:"Delete Job",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-gray-600",children:"Are you sure you want to delete this job posting? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(t,{variant:"outline",onClick:()=>n(null),children:"Cancel"}),e.jsx(t,{variant:"danger",onClick:()=>m&&h.mutate(m),isLoading:h.isPending,children:"Delete Job"})]})]})})]})})};export{je as default};
