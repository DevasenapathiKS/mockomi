import{j as e,m as k}from"./ui-E8jIx32d.js";import{r as E,L as d}from"./vendor-08mqACR8.js";import{u as J}from"./data-CNpY1-rC.js";import{j as O}from"./jobService-YZCEkjJN.js";import{A as t,S as W}from"./index-FHRRNkNB.js";import{D as R}from"./DashboardLayout-dWeTT2L6.js";import{B as n}from"./Button-DkVvCag_.js";import"./Input-Bbjou70d.js";import"./Textarea-Da6oJh8a.js";import{C as S}from"./Card-Kk9NAdVM.js";import{E as _}from"./EmptyState-DFqz2BFE.js";import{F as B}from"./BuildingOfficeIcon-m0Wh3_We.js";import{F as H}from"./MapPinIcon-CHXOjtSM.js";import{F as V}from"./XMarkIcon-B-SQiyPX.js";import{F as D}from"./UsersIcon-hudjBy-f.js";import{F as T}from"./XCircleIcon-DXZ4M08a.js";import{F as $}from"./CheckCircleIcon-BIxcTuyz.js";import{F as q}from"./EyeIcon-Bn7EARGA.js";import{F as P}from"./ClockIcon-sUFCzahK.js";import"./useAuth-XuAmgmhQ.js";import"./UserIcon-ACflAg1t.js";const xe=()=>{const[a,A]=E.useState("all"),[l,x]=E.useState(1),{data:r,isLoading:C}=J({queryKey:["my-applications",l],queryFn:()=>O.getMyApplications(l,10)}),o=(r==null?void 0:r.data)||[],i=r==null?void 0:r.pagination,g=a==="all"?o:o.filter(s=>s.status===a),I=s=>({[t.PENDING]:{label:"Pending",color:"bg-yellow-100 text-yellow-700",icon:P},[t.REVIEWED]:{label:"Reviewed",color:"bg-blue-100 text-blue-700",icon:q},[t.SHORTLISTED]:{label:"Shortlisted",color:"bg-green-100 text-green-700",icon:$},[t.INTERVIEW]:{label:"Interview",color:"bg-purple-100 text-purple-700",icon:D},[t.OFFERED]:{label:"Offered",color:"bg-emerald-100 text-emerald-700",icon:$},[t.REJECTED]:{label:"Rejected",color:"bg-red-100 text-red-700",icon:T},[t.WITHDRAWN]:{label:"Withdrawn",color:"bg-gray-100 text-gray-700",icon:T}})[s]||{label:s,color:"bg-gray-100 text-gray-700",icon:P},c={total:o.length,pending:o.filter(s=>s.status===t.PENDING).length,shortlisted:o.filter(s=>s.status===t.SHORTLISTED).length,rejected:o.filter(s=>s.status===t.REJECTED).length};return C?e.jsx(R,{children:e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(W,{size:"lg"})})}):e.jsx(R,{children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Applications"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Track your job applications"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[{label:"Total",count:c.total,color:"bg-blue-500"},{label:"Pending",count:c.pending,color:"bg-yellow-500"},{label:"Shortlisted",count:c.shortlisted,color:"bg-green-500"},{label:"Rejected",count:c.rejected,color:"bg-red-500"}].map(s=>e.jsxs(S,{className:"text-center",children:[e.jsx("div",{className:`w-3 h-3 ${s.color} rounded-full mx-auto mb-2`}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.count}),e.jsx("p",{className:"text-sm text-gray-600",children:s.label})]},s.label))}),e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:["all",...Object.values(t)].map(s=>e.jsx("button",{onClick:()=>A(s),className:`
                px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors
                ${a===s?"bg-primary-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}
              `,children:s==="all"?"All":s.replace("_"," ")},s))}),g.length>0?e.jsx("div",{className:"space-y-4",children:g.map((s,j)=>{var f,p,b,h,u,y,N,v,w,F;const m=I(s.status),L=m.icon;return e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:j*.05},children:e.jsx(S,{children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:(p=(f=s.job)==null?void 0:f.company)!=null&&p.logo?e.jsx("img",{src:s.job.company.logo,alt:s.job.company.companyName,className:"w-14 h-14 rounded-lg object-cover"}):e.jsx("div",{className:"w-14 h-14 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(B,{className:"h-7 w-7 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx(d,{to:`/jobs/${(b=s.job)==null?void 0:b._id}`,className:"text-lg font-semibold text-gray-900 hover:text-primary-600",children:((h=s.job)==null?void 0:h.title)||"Job Title"}),e.jsx("p",{className:"text-gray-600",children:((y=(u=s.job)==null?void 0:u.company)==null?void 0:y.companyName)||"Company"})]}),e.jsxs("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${m.color}`,children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),m.label]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-4 text-sm text-gray-500",children:[((N=s.job)==null?void 0:N.location)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),s.job.location.city||s.job.location.country]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(V,{className:"h-4 w-4 mr-1"}),((w=(v=s.job)==null?void 0:v.jobType)==null?void 0:w.replace("-"," "))||"Full Time"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"h-4 w-4 mr-1"}),"Applied ",new Date(s.appliedAt).toLocaleDateString()]})]}),s.notes&&e.jsx("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Note:"})," ",s.notes]})})]}),e.jsx("div",{className:"flex md:flex-col gap-2",children:e.jsx(d,{to:`/jobs/${(F=s.job)==null?void 0:F._id}`,children:e.jsx(n,{variant:"outline",size:"sm",className:"w-full",children:"View Job"})})})]})})},s._id)})}):e.jsx(_,{title:"No applications found",description:a!=="all"?`You don't have any ${a.replace("_"," ")} applications.`:"You haven't applied to any jobs yet.",action:e.jsx(d,{to:"/jobs",children:e.jsx(n,{children:"Browse Jobs"})})}),i&&i.totalPages>1&&e.jsxs("div",{className:"flex justify-center gap-2 mt-8",children:[e.jsx(n,{variant:"outline",onClick:()=>x(l-1),disabled:l===1,children:"Previous"}),e.jsxs("span",{className:"flex items-center px-4 text-sm text-gray-600",children:["Page ",i.page," of ",i.totalPages]}),e.jsx(n,{variant:"outline",onClick:()=>x(l+1),disabled:l>=i.totalPages,children:"Next"})]})]})})};export{xe as default};
