import{j as e}from"./ui-E8jIx32d.js";import{d as m,e as g,r as l}from"./vendor-08mqACR8.js";import{L as h}from"./index-Csr_6NQa.js";import"./data-CNpY1-rC.js";const k=()=>{const[s]=m(),i=g(),[a,r]=l.useState("processing"),[c,o]=l.useState("Processing authentication...");return l.useEffect(()=>{(()=>{try{if(s.get("error")){const u=s.get("message")||"Authentication failed";r("error"),o(u),window.opener&&window.opener.postMessage({type:"oauth-error",message:u},window.location.origin),setTimeout(()=>{window.close()},3e3);return}const t=s.get("accessToken"),d=s.get("refreshToken");if(!t||!d)throw new Error("Missing authentication tokens");window.opener?(window.opener.postMessage({type:"oauth-success",accessToken:t,refreshToken:d},window.location.origin),r("success"),o("Authentication successful! Closing window..."),setTimeout(()=>{window.close()},1e3)):(r("success"),o("Authentication successful! Redirecting..."),setTimeout(()=>{i("/dashboard")},1e3))}catch(n){console.error("OAuth callback error:",n);const t=n instanceof Error?n.message:"Authentication failed";r("error"),o(t),window.opener?(window.opener.postMessage({type:"oauth-error",message:t},window.location.origin),setTimeout(()=>{window.close()},3e3)):setTimeout(()=>{i("/login")},3e3)}})()},[s,i]),e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[a==="processing"&&e.jsx(h,{message:c}),a==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",children:e.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:c})]}),a==="error"&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:e.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Authentication Failed"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:c})]})]})})};export{k as default};
